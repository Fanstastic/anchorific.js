if(typeof Object.create!=="function"){Object.create=function(t){function a(){}a.prototype=t;return new a}}(function(s,r,t,p){"use strict";var i={init:function(t,a){var i=this;i.elem=a;i.$elem=s(a);i.opt=s.extend({},this.opt,t);i.headers=i.$elem.find(i.opt.headers);i.previous=0;if(i.headers.length!==0){i.first=parseInt(i.headers.prop("nodeName").substring(1),null)}i.build()},opt:{navigation:".anchorific",headers:"h1, h2, h3, h4, h5, h6",speed:200,anchorClass:"anchor",anchorText:"#",top:".top",spy:true,position:"append",spyOffset:!0},build:function(){var a=this,t,i=function(){};if(a.opt.navigation){s(a.opt.navigation).append("<ul />");a.previous=s(a.opt.navigation).find("ul").last();i=function(t){return a.navigations(t)}}for(var n=0;n<a.headers.length;n++){t=a.headers.eq(n);i(t);a.anchor(t)}if(a.opt.spy)a.spy();if(a.opt.top)a.back()},navigations:function(t){var a=this,i,n,e,o=a.name(t);if(t.attr("id")!==p)o=t.attr("id");i=s("<a />").attr("href","#"+o).text(t.text());n=s("<li />").append(i);e=parseInt(t.prop("nodeName").substring(1),null);n.attr("data-tag",e);a.subheadings(e,n);a.first=e},subheadings:function(t,a){var i=this,n=s(i.opt.navigation).find("ul"),e=s(i.opt.navigation).find("li");if(t===i.first){i.previous.append(a)}else if(t>i.first){e.last().append("<ul />");s(i.opt.navigation).find("ul").last().append(a);i.previous=a.parent()}else{s("li[data-tag="+t+"]").last().parent().append(a);i.previous=a.parent()}},name:function(t){var a=t.text().replace(/[^\w\s]/gi,"").replace(/\s+/g,"-").toLowerCase();return a},anchor:function(t){var a=this,i=a.name(t),n,e=a.opt.anchorText,o=a.opt.anchorClass,r;if(t.attr("id")===p)t.attr("id",i);r=t.attr("id");n=s("<a />").attr("href","#"+r).html(e).addClass(o);if(a.opt.position==="append"){t.append(n)}else{t.prepend(n)}},back:function(){var a=this,i=s("body, html"),t=s(a.opt.top);t.on("click",function(t){t.preventDefault();i.animate({scrollTop:0},a.opt.speed)})},top:function(t){var a=this,i=a.opt.top,n;if(i!==false){n=s(t).scrollTop()>200?s(i).fadeIn():s(i).fadeOut()}},spy:function(){var a=this,t,i,n,e,o;s(r).scroll(function(t){a.top(this);i=a.headers.map(function(t){if(s(this).offset().top-s(r).scrollTop()<a.opt.spyOffset){return this}});i=s(i).eq(i.length-1);if(i&&i.length){n=s('li:has(a[href="#'+i.attr("id")+'"])');if(o!==p){o.removeClass("active")}n.addClass("active");o=n}})}};s.fn.anchorific=function(a){return this.each(function(){if(!s.data(this,"anchorific")){var t=Object.create(i);t.init(a,this);s.data(this,"anchorific",t)}})}})(jQuery,window,document);